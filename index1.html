<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Game EVAS - Back to School</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
    .hidden { display: none; }
    iframe { width: 100%; height: 500px; border: none; margin-top: 15px; }
    .form-box, .game-box { max-width: 600px; margin: auto; }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; margin-top: 15px; }
  </style>
</head>
<body>

  <h2>ğŸ® TrÃ² chÆ¡i Back to School â€“ EVAS ğŸ®</h2>

  <!-- BÆ°á»›c 1: Form thÃ´ng tin -->
  <div class="form-box" id="infoForm">
    <p>Vui lÃ²ng nháº­p thÃ´ng tin Ä‘á»ƒ tham gia trÃ² chÆ¡i:</p>
    <form id="playerForm">
      <label>Há» tÃªn: </label><br>
      <input type="text" id="name" required><br><br>

      <label>Sá»‘ Ä‘iá»‡n thoáº¡i: </label><br>
      <input type="text" id="phone" required><br><br>

      <button type="submit">Báº¯t Ä‘áº§u chÆ¡i</button>
    </form>
  </div>

  <!-- BÆ°á»›c 2: Game + bá»™ Ä‘áº¿m thá»i gian -->
  <div class="game-box hidden" id="gameBox">
    <h3>â± Thá»i gian: <span id="timer">0</span> giÃ¢y</h3>
    
    <!-- NhÃºng game Genially -->
    <iframe src="https://view.genially.com/68a552f12c3917c9edc07c33/interactive-content-nong-trai-evas" allowfullscreen></iframe>

    <!-- NÃºt káº¿t thÃºc -->
    <button onclick="finishGame()">HoÃ n thÃ nh trÃ² chÆ¡i</button>
  </div>

  <script>
    let startTime, timerInterval;
    let playerName = "", playerPhone = "";

    // Khi phá»¥ huynh nháº­p form
    document.getElementById("playerForm").addEventListener("submit", function(e) {
      e.preventDefault();
      playerName = document.getElementById("name").value;
      playerPhone = document.getElementById("phone").value;

      // áº¨n form, hiá»‡n game
      document.getElementById("infoForm").classList.add("hidden");
      document.getElementById("gameBox").classList.remove("hidden");

      // Báº¯t Ä‘áº§u Ä‘áº¿m giá»
      startTime = Date.now();
      timerInterval = setInterval(() => {
        let elapsed = Math.floor((Date.now() - startTime) / 1000);
        document.getElementById("timer").innerText = elapsed;
      }, 1000);
    });

    // Khi báº¥m HoÃ n thÃ nh
    function finishGame() {
      clearInterval(timerInterval);
      let totalTime = Math.floor((Date.now() - startTime) / 1000);

      // Gá»­i káº¿t quáº£ vÃ o Google Form
      const formURL = "https://docs.google.com/forms/d/102zpNh8hxB1-ugy4YEovdRlt6gwxcVuo3nDNtSYq2jI/formResponse"; 
      const data = new FormData();
      data.append("entry.1485467691", playerName); // entry ID cá»§a trÆ°á»ng Há» tÃªn
      data.append("entry.7245706", playerPhone); // entry ID cá»§a trÆ°á»ng SÄT
      data.append("entry.1870645037", totalTime);   // entry ID cá»§a trÆ°á»ng Thá»i gian

      fetch(formURL, {
        method: "POST",
        body: data,
        mode: "no-cors"
      }).then(() => {
        alert("ğŸ‰ Báº¡n Ä‘Ã£ hoÃ n thÃ nh trÃ² chÆ¡i trong " + totalTime + " giÃ¢y!\nKáº¿t quáº£ Ä‘Ã£ Ä‘Æ°á»£c lÆ°u láº¡i.");
        location.reload(); // reset Ä‘á»ƒ chÆ¡i láº¡i
      });
    }
  </script>

</body>
</html>


